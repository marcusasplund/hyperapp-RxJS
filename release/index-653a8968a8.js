!function(){"use strict";function t(e,r,n){r.ns="http://www.w3.org/2000/svg";for(var o=0;o<n.length;o++){var i=n[o];i.data&&t(i.tag,i.data,i.children)}}function e(t){return"function"==typeof t}function r(t){return null!=t&&"object"==typeof t}function n(){try{return _.apply(this,arguments)}catch(t){return I.errorObject.e=t,I.errorObject}}function o(t){return _=t,n}function i(t){return t.reduce(function(t,e){return t.concat(e instanceof R.UnsubscriptionError?e.errors:e)},[])}function s(t,e,r){if(t){if(t instanceof Q.Subscriber)return t;if(t[z.$$rxSubscriber])return t[z.$$rxSubscriber]()}return t||e||r?new Q.Subscriber(t,e,r):new Q.Subscriber(F.empty)}function c(t){var e,r=t.Symbol;return"function"==typeof r?r.observable?e=r.observable:(e=r("observable"),r.observable=e):e="@@observable",e}function u(t){return t instanceof Date&&!isNaN(+t)}function a(t,e){void 0===e&&(e=Ct.async);var r=Mt.isDate(t),n=r?+t-e.now():Math.abs(t);return this.lift(new Ft(n,e))}function h(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}function l(t){var e=t.Symbol;if("function"==typeof e)return e.iterator||(e.iterator=e("iterator polyfill")),e.iterator;var r=t.Set;if(r&&"function"==typeof(new r)["@@iterator"])return"@@iterator";var n=t.Map;if(n)for(var o=Object.getOwnPropertyNames(n.prototype),i=0;i<o.length;++i){var s=o[i];if("entries"!==s&&"size"!==s&&n.prototype[s]===n.prototype.entries)return s}return"@@iterator"}function p(t,e,r,n){var o=new re.InnerSubscriber(t,r,n);if(o.closed)return null;if(e instanceof ot.Observable)return e._isScalar?(o.next(e.value),o.complete(),null):e.subscribe(o);if(Gt.isArrayLike(e)){for(var i=0,s=e.length;i<s&&!o.closed;i++)o.next(e[i]);o.closed||o.complete()}else{if(Kt.isPromise(e))return e.then(function(t){o.closed||(o.next(t),o.complete())},function(t){return o.error(t)}).then(null,function(t){O.root.setTimeout(function(){throw t})}),o;if(e&&"function"==typeof e[Xt.$$iterator])for(var c=e[Xt.$$iterator]();;){var u=c.next();if(u.done){o.complete();break}if(o.next(u.value),o.closed)break}else if(e&&"function"==typeof e[et.$$observable]){var a=e[et.$$observable]();if("function"==typeof a.subscribe)return a.subscribe(new re.InnerSubscriber(t,r,n));o.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var h=P.isObject(e)?"an invalid object":"'"+e+"'",l="You provided "+h+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";o.error(new TypeError(l))}}return null}function f(t,e,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"number"==typeof e&&(r=e,e=null),this.lift(new le(t,e,r))}function b(t,e){return this.lift(new de.MergeMapOperator(t,e,1))}function d(t){return t&&"function"==typeof t.schedule}var y,v,w,_,m=[],S=function(e,r){var n,o,i=arguments;for(w=[],y=arguments.length;y-- >2;)m.push(i[y]);for(;m.length;)if(Array.isArray(v=m.pop()))for(y=v.length;y--;)m.push(v[y]);else null!=v&&!0!==v&&!1!==v&&("number"==typeof v&&(v+=""),n="string"==typeof v,n&&o?w[w.length-1]+=v:(w.push(v),o=n));return"function"==typeof e?e(r,w):("svg"===e&&t(e,r,w),{tag:e,data:r||{},children:w})},x="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},O=function(t,e){return e={exports:{}},t(e,e.exports),e.exports}(function(t,e){if(e.root="object"==typeof window&&window.window===window&&window||"object"==typeof self&&self.self===self&&self||"object"==typeof x&&x.global===x&&x,!e.root)throw new Error("RxJS could not find any global context (window, self, global)")}),g=e,E={isFunction:g},j=Array.isArray||function(t){return t&&"number"==typeof t.length},N={isArray:j},A=r,P={isObject:A},T={e:{}},I={errorObject:T},k=o,$={tryCatch:k},C=x&&x.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},U=function(t){function e(e){t.call(this),this.errors=e;var r=Error.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"");this.name=r.name="UnsubscriptionError",this.stack=r.stack,this.message=r.message}return C(e,t),e}(Error),M=U,R={UnsubscriptionError:M},V=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var t,e=this,r=!1;if(!this.closed){var n=this,o=n._parent,s=n._parents,c=n._unsubscribe,u=n._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var a=-1,h=s?s.length:0;o;)o.remove(e),o=++a<h&&s[a]||null;if(E.isFunction(c)){var l=$.tryCatch(c).call(this);l===I.errorObject&&(r=!0,t=t||(I.errorObject.e instanceof R.UnsubscriptionError?i(I.errorObject.e.errors):[I.errorObject.e]))}if(N.isArray(u))for(a=-1,h=u.length;++a<h;){var p=u[a];if(P.isObject(p)){var l=$.tryCatch(p.unsubscribe).call(p);if(l===I.errorObject){r=!0,t=t||[];var f=I.errorObject.e;f instanceof R.UnsubscriptionError?t=t.concat(i(f.errors)):t.push(f)}}}if(r)throw new R.UnsubscriptionError(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var r=e;switch(typeof e){case"function":r=new t(e);case"object":if(r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if("function"!=typeof r._addParent){var n=r;r=new t,r._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(r),r._addParent(this),r},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}},t.prototype._addParent=function(t){var e=this,r=e._parent,n=e._parents;r&&r!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}(),Y=V,q={Subscription:Y},D={closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}},F={empty:D},L=O.root.Symbol,J="function"==typeof L&&"function"==typeof L.for?L.for("rxSubscriber"):"@@rxSubscriber",z={$$rxSubscriber:J},B=x&&x.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},G=function(t){function e(r,n,o){switch(t.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=F.empty;break;case 1:if(!r){this.destination=F.empty;break}if("object"==typeof r){r instanceof e?(this.destination=r,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new K(this,r));break}default:this.syncErrorThrowable=!0,this.destination=new K(this,r,n,o)}}return B(e,t),e.prototype[z.$$rxSubscriber]=function(){return this},e.create=function(t,r,n){var o=new e(t,r,n);return o.syncErrorThrowable=!1,o},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this,e=t._parent,r=t._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=r,this},e}(q.Subscription),H=G,K=function(t){function e(e,r,n,o){t.call(this),this._parentSubscriber=e;var i,s=this;E.isFunction(r)?i=r:r&&(s=r,i=r.next,n=r.error,o=r.complete,E.isFunction(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this)),this._context=s,this._next=i,this._error=n,this._complete=o}return B(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},e.prototype.complete=function(){if(!this.isStopped){var t=this._parentSubscriber;this._complete?t.syncErrorThrowable?(this.__tryOrSetError(t,this._complete),this.unsubscribe()):(this.__tryOrUnsub(this._complete),this.unsubscribe()):this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){throw this.unsubscribe(),t}},e.prototype.__tryOrSetError=function(t,e,r){try{e.call(this._context,r)}catch(e){return t.syncErrorValue=e,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(G),Q={Subscriber:H},W=s,X={toSubscriber:W},Z=c,tt=c(O.root),et={getSymbolObservable:Z,$$observable:tt},rt=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var n=this.operator,o=X.toSubscriber(t,e,r);if(n?n.call(o,this.source):o.add(this._trySubscribe(o)),o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.syncErrorThrown=!0,t.syncErrorValue=e,t.error(e)}},t.prototype.forEach=function(t,e){var r=this;if(e||(O.root.Rx&&O.root.Rx.config&&O.root.Rx.config.Promise?e=O.root.Rx.config.Promise:O.root.Promise&&(e=O.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,n){var o=r.subscribe(function(e){if(o)try{t(e)}catch(t){n(t),o.unsubscribe()}else t(e)},n,e)})},t.prototype._subscribe=function(t){return this.source.subscribe(t)},t.prototype[et.$$observable]=function(){return this},t.create=function(e){return new t(e)},t}(),nt=rt,ot={Observable:nt},it=x&&x.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},st=function(t){function e(){var e=t.call(this,"object unsubscribed");this.name=e.name="ObjectUnsubscribedError",this.stack=e.stack,this.message=e.message}return it(e,t),e}(Error),ct=st,ut={ObjectUnsubscribedError:ct},at=x&&x.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},ht=function(t){function e(e,r){t.call(this),this.subject=e,this.subscriber=r,this.closed=!1}return at(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var r=e.indexOf(this.subscriber);-1!==r&&e.splice(r,1)}}},e}(q.Subscription),lt=ht,pt={SubjectSubscription:lt},ft=x&&x.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},bt=function(t){function e(e){t.call(this,e),this.destination=e}return ft(e,t),e}(Q.Subscriber),dt=function(t){function e(){t.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return ft(e,t),e.prototype[z.$$rxSubscriber]=function(){return new bt(this)},e.prototype.lift=function(t){var e=new vt(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new ut.ObjectUnsubscribedError;if(!this.isStopped)for(var e=this.observers,r=e.length,n=e.slice(),o=0;o<r;o++)n[o].next(t)},e.prototype.error=function(t){if(this.closed)throw new ut.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,r=e.length,n=e.slice(),o=0;o<r;o++)n[o].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new ut.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,e=t.length,r=t.slice(),n=0;n<e;n++)r[n].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new ut.ObjectUnsubscribedError;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new ut.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),q.Subscription.EMPTY):this.isStopped?(t.complete(),q.Subscription.EMPTY):(this.observers.push(t),new pt.SubjectSubscription(this,t))},e.prototype.asObservable=function(){var t=new ot.Observable;return t.source=this,t},e.create=function(t,e){return new vt(t,e)},e}(ot.Observable),yt=dt,vt=function(t){function e(e,r){t.call(this),this.destination=e,this.source=r}return ft(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):q.Subscription.EMPTY},e}(dt),wt=x&&x.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},_t=function(t){function e(e,r){t.call(this)}return wt(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(q.Subscription),mt=_t,St={Action:mt},xt=x&&x.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},Ot=function(t){function e(e,r){t.call(this,e,r),this.scheduler=e,this.work=r,this.pending=!1}return xt(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t,this.pending=!0;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,e)),this.delay=e,this.id=this.id||this.requestAsyncId(n,this.id,e),this},e.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),O.root.setInterval(t.flush.bind(t,this),r)},e.prototype.recycleAsyncId=function(t,e,r){return void 0===r&&(r=0),null!==r&&this.delay===r?e:O.root.clearInterval(e)&&void 0||void 0},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var r=!1,n=void 0;try{this.work(t)}catch(t){r=!0,n=!!t&&t||new Error(t)}if(r)return this.unsubscribe(),n},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,r=e.actions,n=r.indexOf(this);this.work=null,this.delay=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&r.splice(n,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null))},e}(St.Action),gt=Ot,Et={AsyncAction:gt},jt=function(){function t(e,r){void 0===r&&(r=t.now),this.SchedulerAction=e,this.now=r}return t.prototype.schedule=function(t,e,r){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(r,e)},t.now=Date.now?Date.now:function(){return+new Date},t}(),Nt=jt,At={Scheduler:Nt},Pt=x&&x.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},Tt=function(t){function e(){t.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return Pt(e,t),e.prototype.flush=function(t){var e=this.actions;if(this.active)return void e.push(t);var r;this.active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}},e}(At.Scheduler),It=Tt,kt={AsyncScheduler:It},$t=new kt.AsyncScheduler(Et.AsyncAction),Ct={async:$t},Ut=u,Mt={isDate:Ut},Rt=function(){function t(t,e,r){this.kind=t,this.value=e,this.error=r,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,r){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return r&&r()}},t.prototype.accept=function(t,e,r){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,r)},t.prototype.toObservable=function(){switch(this.kind){case"N":return ot.Observable.of(this.value);case"E":return ot.Observable.throw(this.error);case"C":return ot.Observable.empty()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):this.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return this.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}(),Vt=Rt,Yt={Notification:Vt},qt=x&&x.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},Dt=a,Ft=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new Lt(t,this.delay,this.scheduler))},t}(),Lt=function(t){function e(e,r,n){t.call(this,e),this.delay=r,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}return qt(e,t),e.dispatch=function(t){for(var e=t.source,r=e.queue,n=t.scheduler,o=t.destination;r.length>0&&r[0].time-n.now()<=0;)r.shift().notification.observe(o);if(r.length>0){var i=Math.max(0,r[0].time-n.now());this.schedule(t,i)}else e.active=!1},e.prototype._schedule=function(t){this.active=!0,this.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(!0!==this.errored){var e=this.scheduler,r=new Jt(e.now()+this.delay,t);this.queue.push(r),!1===this.active&&this._schedule(e)}},e.prototype._next=function(t){this.scheduleNotification(Yt.Notification.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t)},e.prototype._complete=function(){this.scheduleNotification(Yt.Notification.createComplete())},e}(Q.Subscriber),Jt=function(){function t(t,e){this.time=t,this.notification=e}return t}(),zt={delay:Dt};ot.Observable.prototype.delay=zt.delay;var Bt=function(t){return t&&"number"==typeof t.length},Gt={isArrayLike:Bt},Ht=h,Kt={isPromise:Ht},Qt=l,Wt=l(O.root),Xt={symbolIteratorPonyfill:Qt,$$iterator:Wt},Zt=x&&x.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},te=function(t){function e(e,r,n){t.call(this),this.parent=e,this.outerValue=r,this.outerIndex=n,this.index=0}return Zt(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(Q.Subscriber),ee=te,re={InnerSubscriber:ee},ne=p,oe={subscribeToResult:ne},ie=x&&x.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},se=function(t){function e(){t.apply(this,arguments)}return ie(e,t),e.prototype.notifyNext=function(t,e,r,n,o){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(Q.Subscriber),ce=se,ue={OuterSubscriber:ce},ae=x&&x.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},he=f,le=function(){function t(t,e,r){void 0===r&&(r=Number.POSITIVE_INFINITY),this.project=t,this.resultSelector=e,this.concurrent=r}return t.prototype.call=function(t,e){return e.subscribe(new fe(t,this.project,this.resultSelector,this.concurrent))},t}(),pe=le,fe=function(t){function e(e,r,n,o){void 0===o&&(o=Number.POSITIVE_INFINITY),t.call(this,e),this.project=r,this.resultSelector=n,this.concurrent=o,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return ae(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,r=this.index++;try{e=this.project(t,r)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,r)},e.prototype._innerSub=function(t,e,r){this.add(oe.subscribeToResult(this,t,e,r))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,r,n,o){this.resultSelector?this._notifyResultSelector(t,e,r,n):this.destination.next(e)},e.prototype._notifyResultSelector=function(t,e,r,n){var o;try{o=this.resultSelector(t,e,r,n)}catch(t){return void this.destination.error(t)}this.destination.next(o)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(ue.OuterSubscriber),be=fe,de={mergeMap:he,MergeMapOperator:pe,MergeMapSubscriber:be},ye=b,ve={concatMap:ye};ot.Observable.prototype.concatMap=ve.concatMap;var we=x&&x.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},_e=function(t){function e(e,r){t.call(this),this.value=e,this.scheduler=r,this._isScalar=!0,r&&(this._isScalar=!1)}return we(e,t),e.create=function(t,r){return new e(t,r)},e.dispatch=function(t){var e=t.done,r=t.value,n=t.subscriber;if(e)return void n.complete();n.next(r),n.closed||(t.done=!0,this.schedule(t))},e.prototype._subscribe=function(t){var r=this.value,n=this.scheduler;if(n)return n.schedule(e.dispatch,0,{done:!1,value:r,subscriber:t});t.next(r),t.closed||t.complete()},e}(ot.Observable),me=_e,Se={ScalarObservable:me},xe=x&&x.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},Oe=function(t){function e(e){t.call(this),this.scheduler=e}return xe(e,t),e.create=function(t){return new e(t)},e.dispatch=function(t){t.subscriber.complete()},e.prototype._subscribe=function(t){var r=this.scheduler;if(r)return r.schedule(e.dispatch,0,{subscriber:t});t.complete()},e}(ot.Observable),ge=Oe,Ee={EmptyObservable:ge},je=d,Ne={isScheduler:je},Ae=x&&x.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},Pe=function(t){function e(e,r){t.call(this),this.array=e,this.scheduler=r,r||1!==e.length||(this._isScalar=!0,this.value=e[0])}return Ae(e,t),e.create=function(t,r){return new e(t,r)},e.of=function(){for(var t=arguments,r=[],n=0;n<arguments.length;n++)r[n-0]=t[n];var o=r[r.length-1];Ne.isScheduler(o)?r.pop():o=null;var i=r.length;return i>1?new e(r,o):1===i?new Se.ScalarObservable(r[0],o):new Ee.EmptyObservable(o)},e.dispatch=function(t){var e=t.array,r=t.index,n=t.count,o=t.subscriber;if(r>=n)return void o.complete();o.next(e[r]),o.closed||(t.index=r+1,this.schedule(t))},e.prototype._subscribe=function(t){var r=this.array,n=r.length,o=this.scheduler;if(o)return o.schedule(e.dispatch,0,{array:r,index:0,count:n,subscriber:t});for(var i=0;i<n&&!t.closed;i++)t.next(r[i]);t.complete()},e}(ot.Observable),Te=Pe,Ie={ArrayObservable:Te},ke=Ie.ArrayObservable.of,$e={of:ke};ot.Observable.of=$e.of;var Ce=function(t){return nt.of(t).delay(600)},Ue=(new yt).concatMap(Ce);window.performance.now();Ue.subscribe(function(t){window.performance.now();t()});var Me={add:function(t){return{count:++t.count}},scheduleAdd:function(t,e,r){Ue.next(r.add)},scheduleSub:function(t,e,r){Ue.next(r.sub)},sub:function(t){return{count:--t.count}}},Re={count:0},Ve=function(){return S("header",null,S("h2",null,"hyperapp RxJS "),S("p",null,S("small",null,S("em",null,"click away, clicks will be captured and actions will be queued up, then executed with minimum 600ms between each")," ",S("a",{href:"https://github.com/marcusasplund/hyperapp-RxJS"},"source"))),S("hr",null))},Ye=function(t){return S("button",{class:"button",onclick:t.scheduleAdd},"add one +")},qe=function(t){return S("button",{class:"button",onclick:t.scheduleSub},"subtract one -")},De=function(){return S("fieldset",{id:"console-log-div"},Fe.logs.map(function(t){return Ge(t)}))},Fe={logs:[]},Le=console.log,Je=console.error,ze=console.warn,Be=function(t,e){for(var r=Array.prototype.slice.call(t),n=0;n<r.length;n++)Fe.logs.push({message:r[n],type:e})};console.log=function(){Le.apply(console,arguments),Be(arguments,"log")},console.error=function(){Je.apply(console,arguments),Be(arguments,"error")},console.warn=function(){ze.apply(console,arguments),Be(arguments,"warn")};var Ge=function(t){return S("div",{class:t.type},t.message)},He=function(t,e){return S("div",{class:"container"},Ve(),Ye(e),qe(e),De())};!function(t){function e(t){for(var e=0;e<_.onError.length;e++)_.onError[e](t);if(e<=0)throw t}function r(t,i,s){Object.keys(i).forEach(function(c){t[c]||(t[c]={});var u,a=s?s+"."+c:c,h=i[c];"function"==typeof h?t[c]=function(t){for(u=0;u<_.onAction.length;u++)_.onAction[u](a,t);var r=h(f,t,v,e);if(void 0===r||"function"==typeof r.then)return r;for(u=0;u<_.onUpdate.length;u++)_.onUpdate[u](f,r,t);f=o(f,r),n(f,y)}:r(t[c],h,a)})}function n(t,e){for(r=0;r<_.onRender.length;r++)e=_.onRender[r](t,e);p(d,b,b=e(t,v),0);for(var r=0;r<S.length;r++)S[r]();S=[]}function o(t,e){var r,n={};if(i(e)||Array.isArray(e))return e;for(r in t)n[r]=t[r];for(r in e)n[r]=e[r];return n}function i(t){return"string"===(t=typeof t)||"number"===t||"boolean"===t}function s(t,e){setTimeout(function(){t(e)},0)}function c(t,e){return t.tag!==e.tag||typeof t!=typeof e||i(t)&&t!==e}function u(t){var e;if("string"==typeof t)e=document.createTextNode(t);else{e=t.data&&t.data.ns?document.createElementNS(t.data.ns,t.tag):document.createElement(t.tag);for(var r in t.data)"onCreate"===r?s(t.data[r],e):h(e,r,t.data[r]);for(var n=0;n<t.children.length;n++)e.appendChild(u(t.children[n]))}return e}function a(t,e,r){t.removeAttribute("className"===e?"class":e),"boolean"!=typeof r&&"true"!==r&&"false"!==r||(t[e]=!1)}function h(t,e,r,n){if("style"===e)for(var o in r)t.style[o]=r[o];else if("o"===e[0]&&"n"===e[1]){var i=e.substr(2).toLowerCase();t.removeEventListener(i,n),t.addEventListener(i,r)}else"false"===r||!1===r?(t.removeAttribute(e),t[e]=!1):(t.setAttribute(e,r),"http://www.w3.org/2000/svg"!==t.namespaceURI&&(t[e]=r))}function l(t,e,r){for(var n in o(r,e)){var i=e[n],c=r[n],u=t[n];void 0===i?a(t,n,c):"onUpdate"===n?s(i,t):(i!==c||"boolean"==typeof u&&u!==i)&&h(t,n,i,c)}}function p(t,e,r,n){if(void 0===e)t.appendChild(u(r));else if(void 0===r){var o=t.childNodes[n];S.push(t.removeChild.bind(t,o)),e&&e.data&&e.data.onRemove&&s(e.data.onRemove,o)}else if(c(r,e))t.replaceChild(u(r),t.childNodes[n]);else if(r.tag){var o=t.childNodes[n];l(o,r.data,e.data);for(var i=r.children.length,a=e.children.length,h=0;h<i||h<a;h++){var f=r.children[h];p(o,e.children[h],f,h)}}}for(var f,b,d,y=t.view||function(){return""},v={},w=[],_={onError:[],onAction:[],onUpdate:[],onRender:[]},m=[t].concat((t.plugins||[]).map(function(e){return e(t)})),S=[],x=0;x<m.length;x++){var O=m[x];void 0!==O.model&&(f=o(f,O.model)),O.actions&&r(v,O.actions),O.subscriptions&&(w=w.concat(O.subscriptions));var g=O.hooks;g&&Object.keys(g).forEach(function(t){_[t].push(g[t])})}!function(t){"l"!==document.readyState[0]?t():document.addEventListener("DOMContentLoaded",t)}(function(){d=t.root||document.body.appendChild(document.createElement("div")),n(f,y);for(var r=0;r<w.length;r++)w[r](f,v,e)})}({actions:Me,model:Re,view:He})}();